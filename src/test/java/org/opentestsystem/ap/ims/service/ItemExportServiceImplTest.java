package org.opentestsystem.ap.ims.service;

import org.junit.Before;
import org.junit.Ignore;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.Mock;
import org.mockito.runners.MockitoJUnitRunner;
import org.opentestsystem.ap.common.assembler.AppAssembler;
import org.opentestsystem.ap.common.config.ItemBankProperties;
import org.opentestsystem.ap.common.model.ItemResponse;
import org.opentestsystem.ap.common.model.McItem;
import org.opentestsystem.ap.common.util.SecurityUtil;
import org.opentestsystem.ap.ims.service.export.ItemExportServiceImpl;

import java.io.File;
import java.util.Collections;
import java.util.Optional;

import static org.assertj.core.api.Assertions.assertThat;
import static org.mockito.Mockito.when;

@Ignore
@RunWith(MockitoJUnitRunner.class)
public class ItemExportServiceImplTest {

    @Mock
    private ItemService mockItemService;

    @Mock
    private AppAssembler appAssembler;

    @Mock
    private SecurityUtil securityUtil;

    @Mock
    private ItemBankProperties itemBankProperties;

    private ItemExportServiceImpl itemExportService;

    @Before
    public void setUp() {
        itemExportService = new ItemExportServiceImpl(mockItemService, Collections.emptyList(), appAssembler, securityUtil, itemBankProperties);
    }

    @Test
    @Ignore
    public void shouldCreatePdfFile() {
        ItemResponse itemResponse = new ItemResponse(new McItem("123"));
        when(mockItemService.findItem("123")).thenReturn(itemResponse);
        Optional<File> maybeZip = itemExportService.exportItem("123");

        assertThat(maybeZip.isPresent()).isTrue();
        assertThat(maybeZip.get()).exists();
    }
}